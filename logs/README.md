# **Директория «logs/»**
*«Директория для хранения логов отработанных задач»*

Директория состоит из множества поддиректорий вида:
- *```tester.auto_detector.tsv``` – отчетная таблица с результатами автотестирования (см. ```utils/``` директорию репозитория, tester.py)*
- ```2023-03-01/``` – дневная партиция для соответствующей даты
    - ```230301-000000.log``` – лог-файл для задачи ```#230301-000000``` от 2023-03-01 00:00:00...<br>*«Лог-файл и ресурсы каждой задачи атомарны и уникальны, содержатся в отдельных файлах и имеют уникальный префикс, например: 230301-000000»*
    - ```230301-000000_query.png``` – фрагмент для задачи ```#230301-000000```
    - ```230301-000000_train.png``` – изображение для задачи ```#230301-000000```
    - ```230301-000000_reslt.png``` – результат детекции для задачи ```#230301-000000```
    - *```...``` – последующие задачи, представляющие из себя схожий набор файлов*
- *```...``` – последующие партиции со схожей структурой*

Пример содержимого ```.log``` файла:
```python
--------------------------------------------------------------------------------
[2023-03-01 00:00:00] {INFO} – Выполнение задачи (230301-000000), попытка: 1
--------------------------------------------------------------------------------
[2023-03-01 00:00:00] {INFO} – Параметры детекции:
	"{'MIN_MATCHES': 10, 'FLN_INDEX': {'algorithm': 1, 'trees': 5}, 'FLN_SEARCH': {'checks': 50}, 'HOMOGRAPHY': {'method': 8, 'ransacReprojThreshold': 5.0}}"
[2023-03-01 00:00:00] {INFO} – Обработка изображений:
	Изображение "~/images/q.png" успешно бэкапировано в ".../logs/2023-03-01/230301-000000_query.png"
	Изображение "~/images/t.png" успешно бэкапировано в ".../logs/2023-03-01/230301-000000_train.png"
[2023-03-01 00:00:00] {INFO} – Изображения прочитаны
[2023-03-01 00:00:00] {INFO} – Детектор инициализирован: <class 'cv2.SIFT'>
[2023-03-01 00:00:00] {INFO} – Ключевые точки определены: query (355), train (2662)
[2023-03-01 00:00:00] {INFO} – Мэтчер инициализирован: <class 'cv2.FlannBasedMatcher'>
[2023-03-01 00:00:00] {INFO} – Результаты мэтчинга: до очистки (355), после очистки (177)
[2023-03-01 00:00:00] {INFO} – Поиск гомографии:
	[[ 9.98584908e-01 -3.30924809e-03  1.31344210e+02]
	 [ 7.37337599e-04  9.95600140e-01  1.29178887e+02]
	 [ 1.60932018e-06 -1.09659818e-05  1.00000000e+00]]
[2023-03-01 00:00:00] {INFO} – Определение координат исходного фрагмента:
	"[[131.34421, 129.1789], [130.87946, 377.1133], [435.06366, 377.15305], [434.70135, 129.33977]]"
[2023-03-01 00:00:00] {INFO} – Определение параметров смещения (положительно при повороте по часовой):
	"{'x1': 131.344, 'y1': 129.179, 'x2': 435.064, 'y2': 377.153, 'r': 0.0}"
[2023-03-01 00:00:00] {INFO} – Вывод результата в STDOUT: "[131.344, 129.179, 435.064, 377.153, 0.0]"
[2023-03-01 00:00:00] {INFO} – Отрисовка результата:
	".../logs/2023-03-01/230301-000000_reslt.png"
--------------------------------------------------------------------------------
[2023-03-01 00:00:01] {SUCCESS} – Задача (230301-000000) выполнена успешно
--------------------------------------------------------------------------------

```